<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // console.log("Hello world!")

        function getComputerChoice() {
            const choices = ["rock", "paper", "scissors"];

            return choices.at(Math.random()*3);
        }

        // console.log("The computer chose: " + getComputerChoice())

        function getHumanChoice () {
            let validChoice = true;
            let choice = "";

            do {
                if (validChoice) {
                    choice = prompt("Make your choice! (rock | paper | scissors ):");
                } else {
                    choice = prompt('Please retry, "' + choice + '" is not a valid entry.\n(choose between "rock", "paper" and "scissors")');
                }
                
                choice = choice.toLowerCase();
                validChoice = (choice === 'rock' || choice === 'paper' || choice === 'scissors');

            } while (!validChoice)

            return choice;
        }

        // console.log("The human chose: " + getHumanChoice())

        function capitalize (s){
            return s.at(0).toUpperCase() + s.slice(1);
        }

        function playRound () {
            const computerChoice = getComputerChoice();
            const humanChoice = getHumanChoice();
            let message;
            let winner;

            if (humanChoice === computerChoice) {
                message = "It's a draw! Both have chosen " + capitalize(humanChoice) + ".";
            } else if ((humanChoice === 'paper' && computerChoice ==='rock') ||
                       (humanChoice === 'rock' && computerChoice ==='scissors') ||
                       (humanChoice === 'scissors' && computerChoice ==='paper')) {
                message = "You won! " + capitalize(humanChoice) + " beats " + capitalize(computerChoice) + "!";
                winner = "human";
            } else {
                message = "You lose! " + capitalize(computerChoice) + " beats " + capitalize(humanChoice) + "!";
                winner = "computer";
            }

            console.log(message);
            return winner;

        }

        // playRound()

        function playGame() {
            let humanScore = 0;
            let computerScore = 0;

            for(let roundNumber = 1; roundNumber < 6; roundNumber++) {
                let winner = playRound();

                if (winner == "human") {
                    humanScore++;
                } else if (winner == "computer") {
                    computerScore++;
                }

                console.log("Player's Score: " + humanScore + " | Computer's Score: " + computerScore);
            }

            let finalResult;

            if (humanScore > computerScore) {
                finalResult = "Congratulations! You WON!";
            } else if (humanScore == computerScore) {
                finalResult = "It's a draw! Neither of you prevailed.";
            } else {
                finalResult = "Not your lucky day, the computer won.";
            }
            
            console.log(finalResult);
        }

        playGame();


    </script>
</body>
</html>